## 简介
微表面理论作为一种研究微观几何对反射率影响的数学分析方法，基于将微观几何建模为微表面的集合的思想。其最初由光学物理领域开发，用于研究统计表面上的散射[Beckmann Spizzichino 1963]。在计算机图形学中，使用微表面理论推导基于物理的BRDF。


## 1.定义
绝⼤多数物质在低于⼀个像素的观察尺度上，都是不连续的，称这个尺度为微尺度。在这个尺度下，⼀个像素接收到来⾃某个⽅向的光照并不是⼀单束光，由于⼀个像素的尺⼨远⼤于光⼦的尺⼨，因此⼊射光实际上是很多束光，这些光与微观上具有不同⽅向法线的微⾯元发⽣交互，从⽽反射或折射⾄不同的⽅向


## 2.计算
目前业界广泛采用的Microfacet Cook-Torrance BRDF形式如下
$ f ( i , o ) = \frac { F ( i , h ) G ( i , o , h ) D ( h ) } { 4 ( n , i ) ( n , o ) } $

其中，i为入射方向，o为出射方向，n为宏观表面法线，h为半⽮量。
F为菲涅尔项，考虑入射和半向量，⼀个关于所有微观⾯元的表⾯法线分布函数 D，其中只有法线指向半⽮量⽅向的⾯元才会被观察到。
D为法线分布函数项，考虑半向量是否在法线分布上，⼀个关于所有微观⾯元的表⾯法线分布函数 D，其中只有法线指向半⽮量⽅向的⾯元才会被观察到。
G为阴影遮挡项，法线⽅向处于半⽮量的微观⾯元，当且仅当它们在⼊射⽅向和观察⽅向没有被其他⾯元阻挡才能被观察到。


参考文献：
Beckmann, Petr, and André Spizzichino, "The Scattering of Electromagnetic Waves from Rough Surfaces", Pergamon Press, 1963.
